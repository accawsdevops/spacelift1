policies:
  - name: delete-non-admin-iam-user
    resource: iam-user
    filters:
      - type: value
        key: UserName
        op: not-in
        value:
          - admin-user
    actions:
      - type: delete

  - name: delete-all-iam-groups
    resource: iam-group
    description: Detach policies, remove users, and delete all IAM groups
    actions:
      - type: remove-policy    # Detach managed & inline policies
      - type: remove-users     # Remove users from the group (optional but recommended)
      - type: delete           # Delete the group
